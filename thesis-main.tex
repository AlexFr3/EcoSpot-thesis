\documentclass[12pt,a4paper,openany,twoside]{report}

\usepackage[utf8]{inputenc}
\usepackage[italian]{babel}
\usepackage{fancyhdr}
\usepackage{indentfirst}
\usepackage{graphicx}
\usepackage{newlfont}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{latexsym}
\usepackage{amsthm}
\usepackage{listings}
\usepackage[hyphens]{url}
\usepackage{hyperref}
\usepackage[square,numbers,sort]{natbib} % Gestione bibliografia richiesta
\usepackage{xcolor}
\usepackage{minted}
\usepackage{tabularx}
\usepackage{makecell}
\usepackage{geometry}
\usepackage{acronym}
\usepackage{subcaption}
\usepackage{float}
\usepackage[autostyle]{csquotes} 
% per le virgolette
\DeclareQuoteAlias{american}{italian}
\usepackage{todonotes}

\bibliographystyle{unsrtnat} % Stile bibliografia
\lstset{frame=single,breaklines=true}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{4}
\oddsidemargin=30pt
\evensidemargin=20pt
\linespread{1.3}
\graphicspath{{./figures/}{./img/}} % Cartelle immagini

% Header e Footer
\pagestyle{fancy}
\addtolength{\headwidth}{20pt}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter.\ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection \ #1}{}}
% Definizione globale per TUTTE le pagine (pari e dispari)
% \lhead: Pari=Numero Pagina, Dispari=Nome Sezione (\rightmark)
\lhead[\fancyplain{}{\bfseries\thepage}]{\fancyplain{}{\bfseries\rightmark}}
% \rhead: Pari=Nome Capitolo (\leftmark), Dispari=Numero Pagina
\rhead[\fancyplain{}{\bfseries\leftmark}]{\fancyplain{}{\bfseries\thepage}}
\cfoot{}

% --- COMANDI UTILI ---
\newcommand{\nchapter}[1]{
  \clearpage{\pagestyle{empty}}
  \chapter{#1}
  %\lhead[\fancyplain{}{\bfseries\thepage}]{\fancyplain{}{\bfseries\rightmark}}
}
\newcommand{\unchapter}[1]{
  \clearpage{\pagestyle{empty}}
  \chapter*{#1}
  \markboth{#1}{#1} 
  \addcontentsline{toc}{chapter}{#1}
}
\newcommand{\unsection}[1]{\section*{#1}\addcontentsline{toc}{section}{#1}}

% --- ACRONIMI ---
\acrodef{IoT}{Internet of Things}
\acrodef{API}{Application Programming Interface}
\acrodef{BaaS}{Backend as a Service}
\acrodef{CRUD}{Create, Retrieve, Update, Delete}
\begin{document}

% 1. Frontespizio
\input{front-matter/title-page.tex}

\pagenumbering{roman}

% 2. Abstract/Introduzione
\input{front-matter/00-introduction.tex}

\tableofcontents

\clearpage{\pagestyle{empty}}
\pagenumbering{arabic}

% Capitoli
\input{chapters/chap01_contesto.tex}
\input{chapters/chap02_tecnologie.tex} 
\input{chapters/chap03_implementazione.tex}


% 4. Conclusioni
\input{back-matter/conclusion.tex}

% 5. Bibliografia
\cleardoublepage
\addcontentsline{toc}{chapter}{Bibliografia}
\nocite{*}
\bibliography{bibliography} % Legge il file bibliography.bib

% 6. Ringraziamenti
\input{back-matter/acknowledgements.tex}

\end{document}